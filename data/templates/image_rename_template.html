<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Image Renaming Tool</title>    <style>	/* Center the image and limit its size */	#image-container {	    text-align: center;	    margin-bottom: 10px;	    display: flex;	    justify-content: center;	    align-items: center;	    height: 55vh; /* Ensure it stays within a defined area */	    overflow: hidden; /* Prevent overflow when rotated */	    position: relative;	}	/* Ensure image stays contained */	#image-display {	    max-height: 50vh; /* Half the viewport height */	    max-width: 90%; /* Ensure it doesn't get too wide */	    cursor: pointer;	    transition: transform 0.3s ease;	}	/* Buttons container */	#controls-container {	    display: flex;	    justify-content: center;	    gap: 10px;	    margin-top: 20px; /* Ensures spacing below the image */	}	/* Ensure modal image fits within screen */	#image-modal {	    display: none; /* Hidden by default */	    position: fixed;	    z-index: 10;	    left: 0;	    top: 0;	    width: 100%;	    height: 100%;	    background-color: rgba(0, 0, 0, 0.8); /* Dark background */	    justify-content: center;	    align-items: center;	}	#modal-image {	    max-width: 90vw;	    max-height: 90vh;	    object-fit: contain;	}    </style><script>	let currentImage = "";	let rotation = 0;	let remainingImages = 0;	let defaultFormType = "blank";	async function loadImage() {	    let response = await fetch("/get_image");	    let data = await response.json();	    if (data.image) {		currentImage = data.image;		rotation = 0; // Reset rotation for new image		document.getElementById("image-display").style.transform = "rotate(0deg)"; // Reset CSS rotation		document.getElementById("image-display").src = `/images/${data.image}`;		document.getElementById("modal-image").src = `/images/${data.image}`;		document.getElementById("filename").innerText = `Editing: ${data.filename}`;		document.getElementById("progress").innerText = `Remaining: ${data.remaining} images`;		document.getElementById("form-options").value = data.default_form_type;		remainingImages = data.remaining;	    } else {		document.getElementById("status").innerText = "All images processed!";		document.getElementById("image-display").src = "";		document.getElementById("filename").innerText = "";		document.getElementById("progress").innerText = "";	    }	}	function openModal() {	    let modal = document.getElementById("image-modal");	    let modalImage = document.getElementById("modal-image");	    let mainImage = document.getElementById("image-display");	    modalImage.src = mainImage.src;	    modal.style.display = "flex";	}	function closeModal() {	    document.getElementById("image-modal").style.display = "none";	}	async function previousImage() {	    let response = await fetch("/previous_image", { method: "POST" });	    let data = await response.json();	    if (data.success) {		loadImage();	    } else {		alert("No previous images.");	    }	}	async function nextImage() {	    let response = await fetch("/next_image", { method: "POST" });	    let data = await response.json();	    if (data.success) {		loadImage();	    } else {		alert("No more images.");	    }	}	function rotateImage() {	    rotation = (rotation + 90) % 360;	    document.getElementById("image-display").style.transform = `rotate(${rotation}deg)`;	}	async function saveRotation() {	    let response = await fetch("/save_rotation", {		method: "POST",		headers: { "Content-Type": "application/json" },		body: JSON.stringify({ rotation: rotation })	    });	    let data = await response.json();	    if (data.success) {		alert("Rotation saved!");	    } else {		alert("Error saving rotation");	    }	}	async function renameImage() {	    let formType = document.getElementById("form-options").value;	    if (!formType) return;	    let response = await fetch("/rename_image", {		method: "POST",		headers: { "Content-Type": "application/json" },		body: JSON.stringify({ form_type: formType, rotation: rotation })	    });	    let data = await response.json();	    if (data.success) {		loadImage();	    } else {		alert("Error renaming image");	    }	}	window.onload = loadImage;    </script></head><body>    <h2>Image Renaming Tool</h2>    <p id="status">Processing images...</p>    <p id="filename">Editing: </p>    <div id="image-container">        <img id="image-display" src="" alt="Current Image" onclick="openModal()">    </div>    <div id="image-modal" onclick="closeModal()">        <img id="modal-image" src="" alt="Full Image">    </div>	<select id="form-options">	    {% for option in form_types %}		<option value="{{ option }}" {% if option == 'BLANK' %}selected{% endif %}>{{ option }}</option>	    {% endfor %}	</select>    </select>	<p id="progress">Remaining: </p>	<button onclick="previousImage()">Previous</button>	<button onclick="rotateImage()">Rotate 90Â°</button>	<button onclick="saveRotation()">Save Rotation</button>	<button onclick="nextImage()">Next</button>	<button onclick="renameImage()">Save & Rename</button></body></html>